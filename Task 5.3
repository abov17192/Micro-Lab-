#define LED1 6
#define LED2 9
#define LED3 11

void setup() {
  pinMode(LED1, OUTPUT);
  pinMode(LED2, OUTPUT);
  pinMode(LED3, OUTPUT);
  pinMode(5, INPUT);

  TCCR0A = (1 << WGM00) | (1 << WGM01) | (1 << COM0A1);
  TCCR0B = (1 << CS00);

  TCCR1A = 0;
  TCCR1B = (1 << CS12) | (1 << CS11) | (1 << CS10);
  TCNT1 = 0;

  TCCR2A = (1 << WGM20) | (1 << WGM21) | (1 << COM2A1);
  TCCR2B = (1 << CS20);

  OCR0A = 0;
  OCR1A = 0;
  OCR2A = 0;
}

void loop() {
  uint16_t count = TCNT1;
  if (count > 12) {
    TCNT1 = 0;
    count = 0;
  }

  uint8_t step = count % 4;
  uint8_t brightness = (step + 1) * 64;

  OCR0A = 0;
  OCR1A = 0;
  OCR2A = 0;

  if (count < 4) {
    OCR0A = brightness;
  } else if (count < 8) {
    OCR1A = brightness;
  } else {
    OCR2A = brightness;
  }
}

